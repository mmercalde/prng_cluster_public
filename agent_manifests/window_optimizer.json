{
  "agent_name": "window_optimizer_agent",
  "version": "1.3.0",
  "pipeline_step": 1,
  "description": "Optimizes window parameters using configurable search strategies",
  "inputs": {
    "required": [],
    "optional": [
      "lottery_file",
      "trials",
      "prng_type",
      "strategy",
      "max_seeds",
      "forward_threshold",
      "reverse_threshold"
    ]
  },
  "actions": [
    {
      "name": "run_window_optimization",
      "type": "subprocess",
      "command_template": "python3 window_optimizer.py --strategy {strategy} --lottery-file {lottery_file} --trials {trials} --output {output_file} --prng-type {prng_type} --max-seeds {max_seeds} --forward-threshold {forward_threshold} --reverse-threshold {reverse_threshold} --test-both-modes"
    }
  ],
  "default_params": {
    "strategy": "bayesian",
    "lottery_file": "synthetic_lottery.json",
    "trials": 20,
    "output_file": "optimal_window_config.json",
    "prng_type": "java_lcg",
    "max_seeds": 10000000,
    "forward_threshold": 0.72,
    "reverse_threshold": 0.81
  },
  "parameter_options": {
    "strategy": {
      "bayesian": "Optuna TPE - learns from previous tests, most efficient (RECOMMENDED)",
      "random": "Random sampling - good baseline, explores widely",
      "grid": "Exhaustive grid search - tests predefined configurations",
      "evolutionary": "Genetic algorithm - evolves configurations over generations"
    },
    "prng_type": "See prng_registry.py for full list (46 algorithms)"
  },
  "outputs": [
    "optimal_window_config.json",
    "bidirectional_survivors.json",
    "train_history.json",
    "holdout_history.json"
  ],
  "follow_up_agents": [
    "scorer_meta_agent"
  ],
  "cluster_resources": {
    "nodes": [
      "zeus",
      "rig-6600",
      "rig-6600b"
    ],
    "total_gpus": 26,
    "total_tflops": 285.69
  },
  "success_condition": {
    "type": "file_exists",
    "files": [
      "optimal_window_config.json",
      "bidirectional_survivors.json"
    ]
  },
  "parameter_bounds": {
    "forward_threshold": {
      "type": "float",
      "min": 0.5,
      "max": 0.95,
      "default": 0.72,
      "description": "Forward sieve match threshold. Higher = stricter filtering, fewer false positives.",
      "optimized_by": "Optuna TPE",
      "effect": "Controls false positive rate in forward sieve. Values 0.70-0.85 typical."
    },
    "reverse_threshold": {
      "type": "float",
      "min": 0.6,
      "max": 0.98,
      "default": 0.81,
      "description": "Reverse sieve match threshold. Should be >= forward_threshold for stricter validation.",
      "optimized_by": "Optuna TPE",
      "effect": "Controls historical consistency check. Values 0.75-0.90 typical."
    },
    "window_size": {
      "type": "int",
      "min": 128,
      "max": 4096,
      "default": 512,
      "description": "Number of draws in the analysis window.",
      "optimized_by": "Optuna TPE"
    },
    "offset": {
      "type": "int",
      "min": 0,
      "max": 2000,
      "default": 0,
      "description": "Starting position offset in the draw history.",
      "optimized_by": "Optuna TPE"
    },
    "skip_min": {
      "type": "int",
      "min": 0,
      "max": 3,
      "default": 0,
      "description": "Minimum skip value for PRNG advancement.",
      "optimized_by": "Optuna TPE"
    },
    "skip_max": {
      "type": "int",
      "min": 0,
      "max": 500,
      "default": 50,
      "description": "Maximum skip value for PRNG advancement.",
      "optimized_by": "Optuna TPE"
    }
  }
}