{
  "agent_name": "reinforcement_agent",
  "description": "Step 5: Train ML models with anti-overfitting measures. Emits signal_quality to sidecar for Step 6 gate.",
  "pipeline_step": 5,
  "version": "1.5.0",
  
  "inputs": [
    {
      "name": "survivors_with_scores",
      "file_pattern": "survivors_with_scores.json",
      "required": true,
      "description": "Scored survivors with features and holdout_hits"
    },
    {
      "name": "train_history",
      "file_pattern": "train_history.json",
      "required": true,
      "description": "Training lottery draws"
    }
  ],
  
  "outputs": [
    {
      "name": "model_checkpoint",
      "file_pattern": "models/reinforcement/best_model.*",
      "required": true,
      "description": "Trained model checkpoint"
    },
    {
      "name": "model_sidecar",
      "file_pattern": "models/reinforcement/best_model.meta.json",
      "required": true,
      "description": "Model metadata with signal_quality"
    }
  ],
  
  "signal_quality_emission": {
    "description": "Step 5 computes and emits signal_quality to sidecar",
    "destination": "best_model.meta.json:signal_quality",
    "computed_from": "holdout_hits target distribution"
  },
  
  "autonomy_boundaries": {
    "step_5_authority": [
      "Train ML models",
      "Compute signal_quality (SINGLE SOURCE OF TRUTH)",
      "Emit to sidecar"
    ],
    "step_5_does_NOT": [
      "Decide whether Step 6 proceeds",
      "Override WATCHER_AGENT"
    ]
  },
  
  "parameter_bounds": {
    "model_type": {
      "type": "categorical",
      "values": ["neural_net", "xgboost", "lightgbm", "catboost", "random_forest"],
      "default": "neural_net"
    },
    "compare_models": {
      "type": "bool",
      "default": false
    },
    "trials": {
      "type": "int",
      "min": 10,
      "max": 200,
      "default": 50
    }
  },
  
  "follow_up_agents": ["prediction_agent"],
  "version_history": [
    {"version": "1.5.0", "date": "2026-01-01", "changes": ["Added signal_quality emission"]}
  ]
}
